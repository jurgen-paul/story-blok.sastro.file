---
import { useStoryblokApi } from "@storyblok/astro";
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import BaseLayout from "../layouts/BaseLayout.astro";

const sbApi = useStoryblokApi();

const { slug } = Astro.params;

const { data } = await sbApi.get(
  `cdn/stories/${slug === undefined ? "home" : slug}`,
  {
    version: "draft",
  }
);

const story = data.story;
---

<BaseLayout>
  <StoryblokComponent blok={story.content} />
</BaseLayout>
