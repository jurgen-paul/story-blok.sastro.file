---
import { useStoryblok } from "@storyblok/astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";

const { slug } = Astro.params;
const story = await useStoryblok(
  `cdn/stories/${slug === undefined ? "home" : slug}`,
  {
    version: "draft",
    resolve_relations: ["featured-articles.posts"],
  },
  {
    preventClicks: true,
    resolveRelations: ["featured-articles.posts"],
    resolveLinks: "url",
  },
  Astro
);
---

<BaseLayout>
  <StoryblokComponent
    bridgeConfig={{ resolveRelations: ["featured-articles.posts"] }}
    blok={story.content}
  />
</BaseLayout>
